import{s as $,n as H,c as ee,o as te,r as le}from"../chunks/scheduler.Bmg8oFKD.js";import{S as se,i as re,e as E,t as j,s as V,j as L,b as T,n as D,c as R,d as v,f as I,h as w,a as N,o as d,p as A,g as B,l as z,m as x,u as ae,q as Z,r as F}from"../chunks/index.r7FLvRHx.js";import{e as P}from"../chunks/each.D6YF6ztN.js";import{p as oe}from"../chunks/stores.B1-CehQr.js";function G(o,e,t){const l=o.slice();return l[14]=e[t][0],l[15]=e[t][1],l[18]=e,l[19]=t,l}function K(o,e,t){const l=o.slice();return l[14]=e[t][0],l[15]=e[t][1],l}function ne(o){let e,t,l,n="Modificar Entrada",f,s,i,p,m,u,c,h="Guardar Cambios",r,a,y="Cancelar",g,C,b=P(Object.entries(o[0])),_=[];for(let O=0;O<b.length;O+=1)_[O]=Q(G(o,b,O));return{c(){e=E("div"),t=E("div"),l=E("h2"),l.textContent=n,f=V(),s=E("form"),i=E("table"),p=E("tbody");for(let O=0;O<_.length;O+=1)_[O].c();m=V(),u=E("div"),c=E("button"),c.textContent=h,r=V(),a=E("button"),a.textContent=y,this.h()},l(O){e=T(O,"DIV",{class:!0});var M=D(e);t=T(M,"DIV",{class:!0});var k=D(t);l=T(k,"H2",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-11gi9en"&&(l.textContent=n),f=I(k),s=T(k,"FORM",{});var S=D(s);i=T(S,"TABLE",{class:!0});var Y=D(i);p=T(Y,"TBODY",{});var q=D(p);for(let U=0;U<_.length;U+=1)_[U].l(q);q.forEach(v),Y.forEach(v),m=I(S),u=T(S,"DIV",{style:!0});var J=D(u);c=T(J,"BUTTON",{type:!0,style:!0,"data-svelte-h":!0}),B(c)!=="svelte-gw1m0c"&&(c.textContent=h),r=I(J),a=T(J,"BUTTON",{style:!0,"data-svelte-h":!0}),B(a)!=="svelte-gkuw1h"&&(a.textContent=y),J.forEach(v),S.forEach(v),k.forEach(v),M.forEach(v),this.h()},h(){w(l,"class","svelte-19z3zph"),w(i,"class","svelte-19z3zph"),w(c,"type","submit"),z(c,"text-align","center "),z(c,"background-color","#0366d6"),z(c,"color","white"),z(c,"padding","10px 20px"),z(c,"border","none"),z(c,"border-radius","5px"),z(c,"cursor","pointer"),z(a,"background-color","#dc3545"),z(a,"color","white"),z(a,"padding","10px 20px"),z(a,"border","none"),z(a,"border-radius","5px"),z(a,"cursor","pointer"),z(u,"margin-top","20px"),z(u,"display","flex"),z(u,"justify-content","space-between"),w(t,"class","card svelte-19z3zph"),w(e,"class","container")},m(O,M){N(O,e,M),d(e,t),d(t,l),d(t,f),d(t,s),d(s,i),d(i,p);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(p,null);d(s,m),d(s,u),d(u,c),d(u,r),d(u,a),g||(C=[x(c,"click",o[8]),x(a,"click",o[9]),x(s,"submit",ae(o[5]))],g=!0)},p(O,M){if(M&1){b=P(Object.entries(O[0]));let k;for(k=0;k<b.length;k+=1){const S=G(O,b,k);_[k]?_[k].p(S,M):(_[k]=Q(S),_[k].c(),_[k].m(p,null))}for(;k<_.length;k+=1)_[k].d(1);_.length=b.length}},d(O){O&&v(e),Z(_,O),g=!1,le(C)}}}function ie(o){let e,t;function l(s,i){return i&1&&(e=null),e==null&&(e=Object.keys(s[0]).length>0),e?fe:ce}let n=l(o,-1),f=n(o);return{c(){f.c(),t=L()},l(s){f.l(s),t=L()},m(s,i){f.m(s,i),N(s,t,i)},p(s,i){n===(n=l(s,i))&&f?f.p(s,i):(f.d(1),f=n(s),f&&(f.c(),f.m(t.parentNode,t)))},d(s){s&&v(t),f.d(s)}}}function Q(o){let e,t,l=o[14]+"",n,f,s,i,p,m,u,c;function h(){o[7].call(p,o[14])}return{c(){e=E("tr"),t=E("td"),n=j(l),f=j(":"),s=V(),i=E("td"),p=E("input"),m=V(),this.h()},l(r){e=T(r,"TR",{class:!0});var a=D(e);t=T(a,"TD",{class:!0});var y=D(t);n=R(y,l),f=R(y,":"),y.forEach(v),s=I(a),i=T(a,"TD",{class:!0});var g=D(i);p=T(g,"INPUT",{type:!0,class:!0}),g.forEach(v),m=I(a),a.forEach(v),this.h()},h(){w(t,"class","attribute svelte-19z3zph"),w(p,"type","text"),w(p,"class","svelte-19z3zph"),w(i,"class","value svelte-19z3zph"),w(e,"class","svelte-19z3zph")},m(r,a){N(r,e,a),d(e,t),d(t,n),d(t,f),d(e,s),d(e,i),d(i,p),F(p,o[0][o[14]]),d(e,m),u||(c=x(p,"input",h),u=!0)},p(r,a){o=r,a&1&&l!==(l=o[14]+"")&&A(n,l),a&1&&p.value!==o[0][o[14]]&&F(p,o[0][o[14]])},d(r){r&&v(e),u=!1,c()}}}function ce(o){let e,t="No hay datos disponibles";return{c(){e=E("p"),e.textContent=t,this.h()},l(l){e=T(l,"P",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-167bv6c"&&(e.textContent=t),this.h()},h(){w(e,"class","container")},m(l,n){N(l,e,n)},p:H,d(l){l&&v(e)}}}function fe(o){let e,t,l,n,f='<th class="svelte-19z3zph">Atributos</th> <th class="svelte-19z3zph">Valor</th>',s,i,p,m,u,c="Modificar Entrada",h,r,a=P(Object.entries(o[0])),y=[];for(let g=0;g<a.length;g+=1)y[g]=W(K(o,a,g));return{c(){e=E("div"),t=E("div"),l=E("table"),n=E("thead"),n.innerHTML=f,s=V(),i=E("tbody");for(let g=0;g<y.length;g+=1)y[g].c();p=V(),m=E("div"),u=E("button"),u.textContent=c,this.h()},l(g){e=T(g,"DIV",{class:!0});var C=D(e);t=T(C,"DIV",{class:!0});var b=D(t);l=T(b,"TABLE",{class:!0});var _=D(l);n=T(_,"THEAD",{"data-svelte-h":!0}),B(n)!=="svelte-wjdg3n"&&(n.innerHTML=f),s=I(_),i=T(_,"TBODY",{});var O=D(i);for(let k=0;k<y.length;k+=1)y[k].l(O);O.forEach(v),_.forEach(v),p=I(b),m=T(b,"DIV",{style:!0});var M=D(m);u=T(M,"BUTTON",{style:!0,"data-svelte-h":!0}),B(u)!=="svelte-1ayvnnj"&&(u.textContent=c),M.forEach(v),b.forEach(v),C.forEach(v),this.h()},h(){w(l,"class","svelte-19z3zph"),z(u,"background-color","#0366d6"),z(u,"color","white"),z(u,"padding","10px 20px"),z(u,"border","none"),z(u,"border-radius","5px"),z(u,"cursor","pointer"),z(m,"text-align","center "),z(m,"margin-top","20px"),z(m,"display","flex"),z(m,"justify-content","space-between"),w(t,"class","card svelte-19z3zph"),w(e,"class","container")},m(g,C){N(g,e,C),d(e,t),d(t,l),d(l,n),d(l,s),d(l,i);for(let b=0;b<y.length;b+=1)y[b]&&y[b].m(i,null);d(t,p),d(t,m),d(m,u),h||(r=x(u,"click",o[6]),h=!0)},p(g,C){if(C&1){a=P(Object.entries(g[0]));let b;for(b=0;b<a.length;b+=1){const _=K(g,a,b);y[b]?y[b].p(_,C):(y[b]=W(_),y[b].c(),y[b].m(i,null))}for(;b<y.length;b+=1)y[b].d(1);y.length=a.length}},d(g){g&&v(e),Z(y,g),h=!1,r()}}}function ue(o){let e=o[15]+"",t;return{c(){t=j(e)},l(l){t=R(l,e)},m(l,n){N(l,t,n)},p(l,n){n&1&&e!==(e=l[15]+"")&&A(t,e)},d(l){l&&v(t)}}}function he(o){let e=JSON.stringify(o[15])+"",t;return{c(){t=j(e)},l(l){t=R(l,e)},m(l,n){N(l,t,n)},p(l,n){n&1&&e!==(e=JSON.stringify(l[15])+"")&&A(t,e)},d(l){l&&v(t)}}}function W(o){let e,t,l=o[14]+"",n,f,s,i,p;function m(h,r){return typeof h[15]=="object"?he:ue}let u=m(o),c=u(o);return{c(){e=E("tr"),t=E("td"),n=j(l),f=j(":"),s=V(),i=E("td"),c.c(),p=V(),this.h()},l(h){e=T(h,"TR",{class:!0});var r=D(e);t=T(r,"TD",{class:!0});var a=D(t);n=R(a,l),f=R(a,":"),a.forEach(v),s=I(r),i=T(r,"TD",{class:!0});var y=D(i);c.l(y),y.forEach(v),p=I(r),r.forEach(v),this.h()},h(){w(t,"class","attribute svelte-19z3zph"),w(i,"class","value svelte-19z3zph"),w(e,"class","svelte-19z3zph")},m(h,r){N(h,e,r),d(e,t),d(t,n),d(t,f),d(e,s),d(e,i),c.m(i,null),d(e,p)},p(h,r){r&1&&l!==(l=h[14]+"")&&A(n,l),u===(u=m(h))&&c?c.p(h,r):(c.d(1),c=u(h),c&&(c.c(),c.m(i,null)))},d(h){h&&v(e),c.d()}}}function X(o){let e,t,l;return{c(){e=E("p"),t=j("ERROR: "),l=j(o[1]),this.h()},l(n){e=T(n,"P",{class:!0});var f=D(e);t=R(f,"ERROR: "),l=R(f,o[1]),f.forEach(v),this.h()},h(){w(e,"class","error svelte-19z3zph")},m(n,f){N(n,e,f),d(e,t),d(e,l)},p(n,f){f&2&&A(l,n[1])},d(n){n&&v(e)}}}function de(o){let e,t,l,n,f,s,i,p;function m(r,a){return r[2]?ne:ie}let u=m(o),c=u(o),h=o[1]&&X(o);return{c(){e=E("h2"),t=j("Vehicle details from "),l=j(o[3]),n=j(":"),f=j(o[4]),s=V(),c.c(),i=V(),h&&h.c(),p=L(),this.h()},l(r){e=T(r,"H2",{class:!0});var a=D(e);t=R(a,"Vehicle details from "),l=R(a,o[3]),n=R(a,":"),f=R(a,o[4]),a.forEach(v),s=I(r),c.l(r),i=I(r),h&&h.l(r),p=L(),this.h()},h(){w(e,"class","svelte-19z3zph")},m(r,a){N(r,e,a),d(e,t),d(e,l),d(e,n),d(e,f),N(r,s,a),c.m(r,a),N(r,i,a),h&&h.m(r,a),N(r,p,a)},p(r,[a]){u===(u=m(r))&&c?c.p(r,a):(c.d(1),c=u(r),c&&(c.c(),c.m(i.parentNode,i))),r[1]?h?h.p(r,a):(h=X(r),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},i:H,o:H,d(r){r&&(v(e),v(s),v(i),v(p)),c.d(r),h&&h.d(r)}}}function pe(o,e,t){let l;ee(o,oe,C=>t(12,l=C));let n="/api/v2/vehicles-stock",f={},s="",i=!1,p={},m=l.params.geo,u=l.params.year;te(async()=>{await c(m,u)});async function c(C,b){try{let _=await fetch(n+"/"+C+"/"+b,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("URL Accedida: "+n+"/"+C+"/"+b),_.status==200){let O=await _.json();t(0,f=O),console.log("Dato: "+f)}else _.status==400?(t(1,s="Error en la estructura de los datos"),alert(s)):_.status==409?(t(1,s="Ya existe una entrada con ese país y año"),alert(s)):_.status==404&&(t(1,s="Dato no encontrado"),alert(s));console.log("Datos Originales: "+JSON.stringify(f))}catch(_){t(1,s=_)}}async function h(){try{let C=await fetch(n+"/"+m+"/"+u,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});C.status==200?(p=JSON.stringify(f),t(2,i=!1),await c(m,u)):C.status==400?(t(1,s="No puedes cambiar ni el país ni el año manito"),alert(s)):C.status==409?(t(1,s="Ya existe una entrada con ese país y año"),alert(s)):C.status==404&&(t(1,s="Dato no encontrado"),alert(s)),console.log("Datos Modificados: "+JSON.stringify(p))}catch(C){t(1,s=C)}}const r=()=>{t(2,i=!0)};function a(C){f[C]=this.value,t(0,f)}return[f,s,i,m,u,h,r,a,()=>{t(2,i=!1),h()},()=>{t(2,i=!1)}]}class ye extends se{constructor(e){super(),re(this,e,pe,de,$,{})}}export{ye as component};
