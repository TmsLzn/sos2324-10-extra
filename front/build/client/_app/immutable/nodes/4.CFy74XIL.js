import{s as Z,n as G,c as $,o as ee,r as te}from"../chunks/scheduler.BfJEPAwo.js";import{S as le,i as oe,e as E,t as j,s as I,j as x,b as T,l as O,c as N,d as b,f as B,a as w,n as h,g as V,h as H,m as D,o as P,u as re,p as W,r as q,q as A}from"../chunks/index.CbF2QnM9.js";import{e as J}from"../chunks/each.D6YF6ztN.js";import{p as ne}from"../chunks/stores.Cu7vy6vm.js";function z(n,t,e){const l=n.slice();return l[15]=t[e][0],l[16]=t[e][1],l[19]=t,l[20]=e,l}function X(n,t,e){const l=n.slice();return l[15]=t[e][0],l[16]=t[e][1],l}function se(n){let t,e,l,o="Modificar dato",f,a,i,m,y,_,c,g="Guardar Cambios",p,s,r="Cancelar",d,M,u=J(Object.entries(n[2])),k=[];for(let v=0;v<u.length;v+=1)k[v]=K(z(n,u,v));return{c(){t=E("div"),e=E("div"),l=E("h2"),l.textContent=o,f=I(),a=E("form"),i=E("table"),m=E("tbody");for(let v=0;v<k.length;v+=1)k[v].c();y=I(),_=E("div"),c=E("button"),c.textContent=g,p=I(),s=E("button"),s.textContent=r,this.h()},l(v){t=T(v,"DIV",{class:!0});var R=O(t);e=T(R,"DIV",{class:!0});var C=O(e);l=T(C,"H2",{"data-svelte-h":!0}),V(l)!=="svelte-17st06w"&&(l.textContent=o),f=B(C),a=T(C,"FORM",{});var S=O(a);i=T(S,"TABLE",{});var Y=O(i);m=T(Y,"TBODY",{});var F=O(m);for(let L=0;L<k.length;L+=1)k[L].l(F);F.forEach(b),Y.forEach(b),y=B(S),_=T(S,"DIV",{style:!0});var U=O(_);c=T(U,"BUTTON",{type:!0,style:!0,"data-svelte-h":!0}),V(c)!=="svelte-2yp21"&&(c.textContent=g),p=B(U),s=T(U,"BUTTON",{style:!0,"data-svelte-h":!0}),V(s)!=="svelte-gkuw1h"&&(s.textContent=r),U.forEach(b),S.forEach(b),C.forEach(b),R.forEach(b),this.h()},h(){H(c,"type","submit"),D(c,"text-align","center "),D(c,"background-color","#0366d6"),D(c,"color","white"),D(c,"padding","10px 20px"),D(c,"border","none"),D(c,"border-radius","5px"),D(c,"cursor","pointer"),D(s,"background-color","#dc3545"),D(s,"color","white"),D(s,"padding","10px 20px"),D(s,"border","none"),D(s,"border-radius","5px"),D(s,"cursor","pointer"),D(_,"margin-top","20px"),D(_,"display","flex"),D(_,"justify-content","space-between"),H(e,"class","card"),H(t,"class","container")},m(v,R){w(v,t,R),h(t,e),h(e,l),h(e,f),h(e,a),h(a,i),h(i,m);for(let C=0;C<k.length;C+=1)k[C]&&k[C].m(m,null);h(a,y),h(a,_),h(_,c),h(_,p),h(_,s),d||(M=[P(c,"click",n[9]),P(s,"click",n[10]),P(a,"submit",re(n[6]))],d=!0)},p(v,R){if(R&4){u=J(Object.entries(v[2]));let C;for(C=0;C<u.length;C+=1){const S=z(v,u,C);k[C]?k[C].p(S,R):(k[C]=K(S),k[C].c(),k[C].m(m,null))}for(;C<k.length;C+=1)k[C].d(1);k.length=u.length}},d(v){v&&b(t),W(k,v),d=!1,te(M)}}}function ae(n){let t,e;function l(a,i){return i&4&&(t=null),t==null&&(t=Object.keys(a[2]).length>0),t?ce:ie}let o=l(n,-1),f=o(n);return{c(){f.c(),e=x()},l(a){f.l(a),e=x()},m(a,i){f.m(a,i),w(a,e,i)},p(a,i){o===(o=l(a,i))&&f?f.p(a,i):(f.d(1),f=o(a),f&&(f.c(),f.m(e.parentNode,e)))},d(a){a&&b(e),f.d(a)}}}function K(n){let t,e,l=n[15]+"",o,f,a,i,m,y,_,c;function g(){n[8].call(m,n[15])}return{c(){t=E("tr"),e=E("td"),o=j(l),f=j(":"),a=I(),i=E("td"),m=E("input"),y=I(),this.h()},l(p){t=T(p,"TR",{});var s=O(t);e=T(s,"TD",{class:!0});var r=O(e);o=N(r,l),f=N(r,":"),r.forEach(b),a=B(s),i=T(s,"TD",{class:!0});var d=O(i);m=T(d,"INPUT",{type:!0}),d.forEach(b),y=B(s),s.forEach(b),this.h()},h(){H(e,"class","attribute"),H(m,"type","text"),H(i,"class","value")},m(p,s){w(p,t,s),h(t,e),h(e,o),h(e,f),h(t,a),h(t,i),h(i,m),q(m,n[2][n[15]]),h(t,y),_||(c=P(m,"input",g),_=!0)},p(p,s){n=p,s&4&&l!==(l=n[15]+"")&&A(o,l),s&4&&m.value!==n[2][n[15]]&&q(m,n[2][n[15]])},d(p){p&&b(t),_=!1,c()}}}function ie(n){let t,e="No hay datos disponibles";return{c(){t=E("p"),t.textContent=e,this.h()},l(l){t=T(l,"P",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-167bv6c"&&(t.textContent=e),this.h()},h(){H(t,"class","container")},m(l,o){w(l,t,o)},p:G,d(l){l&&b(t)}}}function ce(n){let t,e,l,o,f="<th>Atributos</th> <th>Valor</th>",a,i,m,y,_,c="Modificar dato",g,p,s=J(Object.entries(n[2])),r=[];for(let d=0;d<s.length;d+=1)r[d]=Q(X(n,s,d));return{c(){t=E("div"),e=E("div"),l=E("table"),o=E("thead"),o.innerHTML=f,a=I(),i=E("tbody");for(let d=0;d<r.length;d+=1)r[d].c();m=I(),y=E("div"),_=E("button"),_.textContent=c,this.h()},l(d){t=T(d,"DIV",{class:!0});var M=O(t);e=T(M,"DIV",{class:!0});var u=O(e);l=T(u,"TABLE",{});var k=O(l);o=T(k,"THEAD",{"data-svelte-h":!0}),V(o)!=="svelte-wjdg3n"&&(o.innerHTML=f),a=B(k),i=T(k,"TBODY",{});var v=O(i);for(let C=0;C<r.length;C+=1)r[C].l(v);v.forEach(b),k.forEach(b),m=B(u),y=T(u,"DIV",{style:!0});var R=O(y);_=T(R,"BUTTON",{style:!0,"data-svelte-h":!0}),V(_)!=="svelte-f9kktg"&&(_.textContent=c),R.forEach(b),u.forEach(b),M.forEach(b),this.h()},h(){D(_,"background-color","#0366d6"),D(_,"color","white"),D(_,"padding","10px 20px"),D(_,"border","none"),D(_,"border-radius","5px"),D(_,"cursor","pointer"),D(y,"text-align","center "),D(y,"margin-top","20px"),D(y,"display","flex"),D(y,"justify-content","space-between"),H(e,"class","card"),H(t,"class","container")},m(d,M){w(d,t,M),h(t,e),h(e,l),h(l,o),h(l,a),h(l,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(i,null);h(e,m),h(e,y),h(y,_),g||(p=P(_,"click",n[7]),g=!0)},p(d,M){if(M&4){s=J(Object.entries(d[2]));let u;for(u=0;u<s.length;u+=1){const k=X(d,s,u);r[u]?r[u].p(k,M):(r[u]=Q(k),r[u].c(),r[u].m(i,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}},d(d){d&&b(t),W(r,d),g=!1,p()}}}function fe(n){let t=n[16]+"",e;return{c(){e=j(t)},l(l){e=N(l,t)},m(l,o){w(l,e,o)},p(l,o){o&4&&t!==(t=l[16]+"")&&A(e,t)},d(l){l&&b(e)}}}function ue(n){let t=JSON.stringify(n[16])+"",e;return{c(){e=j(t)},l(l){e=N(l,t)},m(l,o){w(l,e,o)},p(l,o){o&4&&t!==(t=JSON.stringify(l[16])+"")&&A(e,t)},d(l){l&&b(e)}}}function Q(n){let t,e,l=n[15]+"",o,f,a,i,m;function y(g,p){return typeof g[16]=="object"?ue:fe}let _=y(n),c=_(n);return{c(){t=E("tr"),e=E("td"),o=j(l),f=j(":"),a=I(),i=E("td"),c.c(),m=I(),this.h()},l(g){t=T(g,"TR",{});var p=O(t);e=T(p,"TD",{class:!0});var s=O(e);o=N(s,l),f=N(s,":"),s.forEach(b),a=B(p),i=T(p,"TD",{class:!0});var r=O(i);c.l(r),r.forEach(b),m=B(p),p.forEach(b),this.h()},h(){H(e,"class","attribute"),H(i,"class","value")},m(g,p){w(g,t,p),h(t,e),h(e,o),h(e,f),h(t,a),h(t,i),c.m(i,null),h(t,m)},p(g,p){p&4&&l!==(l=g[15]+"")&&A(o,l),_===(_=y(g))&&c?c.p(g,p):(c.d(1),c=_(g),c&&(c.c(),c.m(i,null)))},d(g){g&&b(t),c.d()}}}function de(n){let t,e,l;return{c(){t=E("hr"),e=j("EXITO: "),l=j(n[0])},l(o){t=T(o,"HR",{}),e=N(o,"EXITO: "),l=N(o,n[0])},m(o,f){w(o,t,f),w(o,e,f),w(o,l,f)},p(o,f){f&1&&A(l,o[0])},d(o){o&&(b(t),b(e),b(l))}}}function _e(n){let t,e,l;return{c(){t=E("hr"),e=j("ERROR: "),l=j(n[1])},l(o){t=T(o,"HR",{}),e=N(o,"ERROR: "),l=N(o,n[1])},m(o,f){w(o,t,f),w(o,e,f),w(o,l,f)},p(o,f){f&2&&A(l,o[1])},d(o){o&&(b(t),b(e),b(l))}}}function pe(n){let t,e,l,o,f,a,i,m;function y(r,d){return r[3]?se:ae}let _=y(n),c=_(n);function g(r,d){if(r[1]!="")return _e;if(r[0]!="")return de}let p=g(n),s=p&&p(n);return{c(){t=E("h1"),e=j("Modificar datos de "),l=j(n[4]),o=j(" en el año "),f=j(n[5]),a=I(),c.c(),i=I(),s&&s.c(),m=x()},l(r){t=T(r,"H1",{});var d=O(t);e=N(d,"Modificar datos de "),l=N(d,n[4]),o=N(d," en el año "),f=N(d,n[5]),d.forEach(b),a=B(r),c.l(r),i=B(r),s&&s.l(r),m=x()},m(r,d){w(r,t,d),h(t,e),h(t,l),h(t,o),h(t,f),w(r,a,d),c.m(r,d),w(r,i,d),s&&s.m(r,d),w(r,m,d)},p(r,[d]){_===(_=y(r))&&c?c.p(r,d):(c.d(1),c=_(r),c&&(c.c(),c.m(i.parentNode,i))),p===(p=g(r))&&s?s.p(r,d):(s&&s.d(1),s=p&&p(r),s&&(s.c(),s.m(m.parentNode,m)))},i:G,o:G,d(r){r&&(b(t),b(a),b(i),b(m)),c.d(r),s&&s.d(r)}}}function he(n,t,e){let l;$(n,ne,u=>e(13,l=u));let o="/api/v2/gdp-growth-rates",f="",a="",i={},m={},y=!1,_=l.params.geo,c=l.params.time_period;ee(async()=>{await g(_,c)});async function g(u,k){try{let v=await fetch(o+"/"+u+"/"+k,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("URL Accedida: "+o+"/"+u+"/"+k),v.status==200){let R=await v.json();e(2,i=R),console.log("Dato: "+i)}else v.status==400?(e(1,a="Error en la estructura de los datos"),alert(a)):v.status==409?(e(1,a="Ya existe una entrada con ese país y año"),alert(a)):v.status==404&&(e(1,a="Dato no encontrado"),alert(a));console.log("Datos Originales: "+JSON.stringify(i))}catch(v){e(1,a=v)}}async function p(){try{const u=await fetch(o+`/${_}/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});u.ok?(m=JSON.stringify(i),e(0,f="Dato actualizado correctamente"),e(3,y=!1),await g(_,c)):u.ok||(u.status==400?e(1,a="Todos los campos deben ser rellenados. El pais y el año deben coincidir con los del dato a actualizar"):u.status==405?e(1,a="Método no permitido"):u.status==409?e(1,a="Ya existe una entrada con ese país y año"):u.status==404&&e(1,a="Dato no encontrado"))}catch(u){e(1,a=u)}}const s=()=>{e(3,y=!0)};function r(u){i[u]=this.value,e(2,i)}return[f,a,i,y,_,c,p,s,r,()=>{e(3,y=!1),p()},()=>{e(3,y=!1)}]}class ke extends le{constructor(t){super(),oe(this,t,he,pe,Z,{})}}export{ke as component};
